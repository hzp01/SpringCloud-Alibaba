[TOC]
## 1 sentinel概念和规则简述
### 1.1 基础概念
sentinel中对资源通过功能约束进行保护，资源可以是类、方法、代码。
功能主要有3类，主要为：限流、熔断降级、系统保护
```
1 不被上游压垮，限流
2 不被下游拖垮，熔断降级，通过并发线程数和响应时间做熔断控制
3 不受外界影响，集群下系统达到边缘负载时自动切换其他服务
```
注：hystrix中的熔断降级是通过线程池隔离实现的，优点实现了资源隔离，缺点增加了线程切换的成本
### 1.2 规则简述
主要包括5个规则：流控规则、降级规则、热点规则、系统规则、授权规则
- 流控：2+3+3，qps线程数，直接关联加链路，限流效果会怎样，失败预热排队才算数
- 降级：3，RT/异常比例/异常数，规定时间内超过阈值就熔断
- 热点：1，参数限流比如商品id或者用户id，防止一个ip进行大数值qps的请求
- 授权：1，白名单用户，通过request来区分来源如不同服务、app或者pc。
- 系统：针对应用非资源维度，略。